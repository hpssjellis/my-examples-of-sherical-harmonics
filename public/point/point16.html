<!DOCTYPE html>
<html>
<head>
    <title>Button-Activated JSON Point Cloud Generator</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        h1 { font-size: 1.5em; }
        /* Minimal inline CSS preference */
        #myGenerateButton { 
            padding: 10px 20px; 
            font-size: 1em; 
            cursor: pointer; 
            background-color: #4CAF50; 
            color: white; 
            border: none; 
            border-radius: 5px;
        }
        #myJsonOutput { 
            width: 100%; 
            height: 500px; 
            margin-top: 15px; 
            padding: 10px; 
            font-family: monospace; 
            font-size: 0.9em; 
            white-space: pre; 
            overflow: auto; 
            border: 1px solid #ccc; 
        }
    </style>
</head>
<body>
    <h1>JSON Point Cloud Generator</h1>
    <p>Click the button to generate 5,000 points for your **myDogPointCloud.json** file.</p>
    
    <button id="myGenerateButton" onclick="myGenerateJson()">Generate JSON</button>

    <textarea id="myJsonOutput" placeholder="JSON data will appear here after you click the button."></textarea>

    <script>
        // Set the desired number of points
        const MY_TOTAL_POINTS = 5000;
        
        // Function to generate coordinates for a simple capsule/cylinder shape
        function myShapeDogBody(myNumPoints) {
            const myPositions = [];
            
            // Parameters for the capsule shape
            const myBodyRadius = 1.0;
            const myBodyLength = 2.5;
            const myHeadOffset = 0.5;
            let myCount = 0;

            // Loop until we have enough points
            while (myCount < myNumPoints) {
                let myX = (Math.random() * 2 - 1) * myBodyLength / 2;
                let myY = (Math.random() * 2 - 1) * myBodyRadius;
                let myZ = (Math.random() * 2 - 1) * myBodyRadius;

                let myIncludePoint = false;
                
                // Check if inside the main body cylinder
                if (Math.abs(myX) <= myBodyLength / 2 - myBodyRadius) {
                    if (myY * myY + myZ * myZ <= myBodyRadius * myBodyRadius) {
                        myIncludePoint = true;
                    }
                } 
                // Check if inside the spherical caps at the ends
                else {
                    let myEndDist = Math.abs(myX) - (myBodyLength / 2 - myBodyRadius);
                    if (myEndDist * myEndDist + myY * myY + myZ * myZ <= myBodyRadius * myBodyRadius) {
                        myIncludePoint = true;
                    }
                }
                
                // Add a small cluster for a "head" near one end (positive X)
                if (Math.random() < 0.05) { 
                     myX = myBodyLength / 2 + myHeadOffset + (Math.random() * 0.4 - 0.2);
                     myY = Math.random() * 0.5;
                     myZ = Math.random() * 0.5 - 0.25;
                     myIncludePoint = true;
                }
                
                if (myIncludePoint) {
                    // Add the position to the array
                    myPositions.push(
                        parseFloat(myX.toFixed(3)), 
                        parseFloat(myY.toFixed(3)),
                        parseFloat(myZ.toFixed(3))
                    );
                    myCount++;
                }
            }
            return myPositions;
        }

        /**
         * Main function to build and display the JSON.
         * Called by the button click.
         */
        async function myGenerateJson() {
            const myPositionsData = myShapeDogBody(MY_TOTAL_POINTS);

            const myDogJson = {
                "myPointCount": myPositionsData.length / 3,
                "myPositionsArray": myPositionsData 
            };

            const myOutputElement = document.getElementById("myJsonOutput");
            
            // Format the JSON with 2-space indentation for readability
            myOutputElement.value = JSON.stringify(myDogJson, null, 2);
            
            // Update button text to confirm action
            document.getElementById("myGenerateButton").textContent = "JSON Generated! Copy the text.";
        }
        
        // Removed the automatic call to myGenerateJson() here.
        // The script now waits for the button click.
    </script>
</body>
</html>
